if (typeof (KhuCongNghiepChiTietControl) == "undefined") KhuCongNghiepChiTietControl = {};
var url = window.location.pathname;
var id = url.substring(url.lastIndexOf('/') + 1);
KhuCongNghiepChiTietControl = {
    Init: function () {
        KhuCongNghiepChiTietControl.LoadThongTinKhuCongNghiep();
        KhuCongNghiepChiTietControl.RegisterEvents();
    },
    LoadThongTinKhuCongNghiep: function () {
        Get({
            "url": localStorage.getItem("API_URL") + "/KhuCongNghiep/GetById?idKhuCongNghiep=" + id,
            callback: function (res) {
                if (res.Success) {
                    var dsDuAn = "";
                    $.each(res.Data.DsDuAn, function (j, duan) {
                        console.log(duan);
                        dsDuAn += "<span>" + duan.TenDuAn + "</span></br>";
                    });
                    console.log(dsDuAn);
                    $('.pagetitle h1').text(res.Data.TenKhuCongNghiep);
                    $("#thong-tin-kcn").html("");
                    var html = `<div class="row">
                                    <div class="col-lg-3 col-md-4 label ">Tên khu công nghiệp</div>
                                    <div class="col-lg-9 col-md-8" data-name="TenDuAn">`+ res.Data.TenKhuCongNghiep + `</div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-md-4 label">Tên chủ đầu tư</div>
                                    <div class="col-lg-9 col-md-8" data-name="TenDuAn">`+ res.Data.TenChuDauTu + `</div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-md-4 label">Địa chỉ</div>
                                    <div class="col-lg-9 col-md-8">`+ res.Data.DiaDiem + `</div>
                                </div>

                                <div class="row">
                                    <div class="col-lg-3 col-md-4 label">Thuộc khu kinh tế</div>
                                    <div class="col-lg-9 col-md-8">`+ (res.Data.ThuocKhuKinhTe == true?"Có" : "Không") + `</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3 col-md-4 label">Ghi chú</div>
                                    <div class="col-lg-9 col-md-8">`+ res.Data.GhiChu + `</div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-3 col-md-4 label">Danh sách dự án</div>
                                    <div class="col-lg-9 col-md-8">`+ dsDuAn+`
                                    </div>
                                </div>`;
                    $("#thong-tin-kcn").append(html);
                }
            }
        });
    },
    RegisterEvents: function () {
        var self = this;
        $('#ThongTinDuAn-tab').trigger('click');
        $('#ThongTinDuAn-tab').off('click').on('click', function () {
            self.LoadThongTinKhuCongNghiep();
        });
        $('#BaoCaoBaoVeMoiTruongKCN-tab').off('click').on('click', function () {
            BaoCaoBaoVeMoiTruongKCNControl.RegisterEventsBaoCaoBaoVeMoiTruongKCN();
        });
        $('#BaoCaoQuanTracMoiTruong-tab').off('click').on('click', function () {
            BaoCaoQuanTracMoiTruongControl.RegisterEventsBaoCaoQuanTracMoiTruong();
        });
    },
}

$(document).ready(function () {
    KhuCongNghiepChiTietControl.Init();
});

